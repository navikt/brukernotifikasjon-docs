{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Introduksjon Brukernotifikasjoner gj\u00f8r det mulig for andre team \u00e5 sende Beskjeder eller Oppgaver til en spesifikk bruker, og f\u00e5 vist dette fram p\u00e5 forsiden av DittNAV. Dette gj\u00f8res gjennom at det blir publisert et event p\u00e5 et sett med topic-er, deretter vil DittNAV ta seg av \u00e5 vise dette for sluttbruker. Teamene kan selv deaktivere eventene igjen, hvis eventene ikke er relevante lengre. Deaktiverte eventer vil fortsatt v\u00e6re tilgjengelig fra historikk-visningen p\u00e5 DittNAV. Brukernotifikasjoner kan ogs\u00e5 brukes til \u00e5 bygge opp tidslinjer, ved at eventer som naturlig h\u00f8rer sammen blir gruppert i en tidslinje. Les mer om eventtyper her eller kom i gang med brukernotifikasjoner her .","title":"Introduksjon"},{"location":"#introduksjon","text":"Brukernotifikasjoner gj\u00f8r det mulig for andre team \u00e5 sende Beskjeder eller Oppgaver til en spesifikk bruker, og f\u00e5 vist dette fram p\u00e5 forsiden av DittNAV. Dette gj\u00f8res gjennom at det blir publisert et event p\u00e5 et sett med topic-er, deretter vil DittNAV ta seg av \u00e5 vise dette for sluttbruker. Teamene kan selv deaktivere eventene igjen, hvis eventene ikke er relevante lengre. Deaktiverte eventer vil fortsatt v\u00e6re tilgjengelig fra historikk-visningen p\u00e5 DittNAV. Brukernotifikasjoner kan ogs\u00e5 brukes til \u00e5 bygge opp tidslinjer, ved at eventer som naturlig h\u00f8rer sammen blir gruppert i en tidslinje. Les mer om eventtyper her eller kom i gang med brukernotifikasjoner her .","title":"Introduksjon"},{"location":"arkitektur/","text":"Arkitektur","title":"Arkitektur"},{"location":"arkitektur/#arkitektur","text":"","title":"Arkitektur"},{"location":"builder/","text":"Builder Alle produsenter oppfordres sterkt til \u00e5 bruke builderene til \u00e5 opprette eventer. Grunnen til dette er at builderene vil validere alle feltene, f\u00f8r et event opprettes. Dette er de samme valideringsreglene som brukes av DittNAV ved innlesing fra kafka, f\u00f8r eventene vises til sluttbruker. Ved \u00e5 bruke builderene minimeres sjansene for at eventene blir avvist av DittNAV pga valideringsfeil. Hvis det fors\u00f8kes \u00e5 bygge et event med ugyldige feltverdier, s\u00e5 vil builderen kasse en FieldValidationException ved kallet til *.build() . Denne exception-en vil gi informasjon om om hvilket felt som feilet og hva som skjedde. Se valideringsregler her Validering Nokkel Beskjed Oppgave Done Statusoppdatering Kode eksempel BeskjedBuilder builder = getBuilderWithValues(); Beskjed beskjed = builder.build(); // Alle felter valideres, for eventet eventuelt blir opprettet private BeskjedBuilder getBuilderWithValues() { return new BeskjedBuilder() .withFodselsnummer(fodselsnr) .withGrupperingsId(grupperingsId) .withSikkerhetsnivaa(sikkerhetsnivaa) .withLink(link) .withTekst(tekst) .withTidspunkt(tidspunkt) .withSynligFremTil(synligFremTil); } Se BeskjedBuilder() her og build() her .","title":"Builder"},{"location":"builder/#builder","text":"Alle produsenter oppfordres sterkt til \u00e5 bruke builderene til \u00e5 opprette eventer. Grunnen til dette er at builderene vil validere alle feltene, f\u00f8r et event opprettes. Dette er de samme valideringsreglene som brukes av DittNAV ved innlesing fra kafka, f\u00f8r eventene vises til sluttbruker. Ved \u00e5 bruke builderene minimeres sjansene for at eventene blir avvist av DittNAV pga valideringsfeil. Hvis det fors\u00f8kes \u00e5 bygge et event med ugyldige feltverdier, s\u00e5 vil builderen kasse en FieldValidationException ved kallet til *.build() . Denne exception-en vil gi informasjon om om hvilket felt som feilet og hva som skjedde. Se valideringsregler her","title":"Builder"},{"location":"builder/#validering","text":"Nokkel Beskjed Oppgave Done Statusoppdatering","title":"Validering"},{"location":"builder/#kode-eksempel","text":"BeskjedBuilder builder = getBuilderWithValues(); Beskjed beskjed = builder.build(); // Alle felter valideres, for eventet eventuelt blir opprettet private BeskjedBuilder getBuilderWithValues() { return new BeskjedBuilder() .withFodselsnummer(fodselsnr) .withGrupperingsId(grupperingsId) .withSikkerhetsnivaa(sikkerhetsnivaa) .withLink(link) .withTekst(tekst) .withTidspunkt(tidspunkt) .withSynligFremTil(synligFremTil); } Se BeskjedBuilder() her og build() her .","title":"Kode eksempel"},{"location":"eksempler/","text":"Det f\u00f8lgende er kun eksempler p\u00e5 hvordan brukernotifikasjoner kan tas i bruk, og verdiene i feltene m\u00e5 tilpasses til hver enkelt applikasjon. Minimal kafka-producer som publiserer brukernotifikasjoner p\u00e5 kafka Dette er et mini-prosjekt som viser hvordan man kan lage en minimal kafka-producer for \u00e5 publisere brukernotifikasjoner som vil vises p\u00e5 forsiden av DittNAV. I det du produserer et event til en kafka-topic s\u00e5 vil kafka \u201cnotere\u201d seg hvilken versjon av skjemaet som den konkrete meldingen ble produsert med. URL-en til Kafkas schema-register m\u00e5 spesifiseres, dette gj\u00f8res i din kafka-producer-config f.eks. slik: put(KafkaAvroDeserializerConfig.SCHEMA_REGISTRY_URL_CONFIG, env.schemaRegistryUrl) riktig URL finnes her . Deretter kan eventer sendes ved \u00e5 f.eks. kalle: producer.send(ProducerRecord(topicNavn, nokkel, oppgaveEvent)) , se her for mer info. DittNAV-event-test-producer Denne kan ogs\u00e5 brukes som inspirasjon for \u00e5 koble seg p\u00e5 kafka. Vi bruker denne appen til \u00e5 legge test eventer p\u00e5 kafka. For \u00e5 kj\u00f8re v\u00e5r test-app m\u00e5 du sette opp hele riggen v\u00e5r med docker-compose. Hvis du ikke er godt kjent med docker-compose anbefaler jeg deg heller \u00e5 se p\u00e5 denne appen , men bruk gjerne dittnav-event-test-producer som inspirasjon. Testing lokalt","title":"Eksempler"},{"location":"eksempler/#minimal-kafka-producer-som-publiserer-brukernotifikasjoner-pa-kafka","text":"Dette er et mini-prosjekt som viser hvordan man kan lage en minimal kafka-producer for \u00e5 publisere brukernotifikasjoner som vil vises p\u00e5 forsiden av DittNAV. I det du produserer et event til en kafka-topic s\u00e5 vil kafka \u201cnotere\u201d seg hvilken versjon av skjemaet som den konkrete meldingen ble produsert med. URL-en til Kafkas schema-register m\u00e5 spesifiseres, dette gj\u00f8res i din kafka-producer-config f.eks. slik: put(KafkaAvroDeserializerConfig.SCHEMA_REGISTRY_URL_CONFIG, env.schemaRegistryUrl) riktig URL finnes her . Deretter kan eventer sendes ved \u00e5 f.eks. kalle: producer.send(ProducerRecord(topicNavn, nokkel, oppgaveEvent)) , se her for mer info.","title":"Minimal kafka-producer som publiserer brukernotifikasjoner p\u00e5 kafka"},{"location":"eksempler/#dittnav-event-test-producer","text":"Denne kan ogs\u00e5 brukes som inspirasjon for \u00e5 koble seg p\u00e5 kafka. Vi bruker denne appen til \u00e5 legge test eventer p\u00e5 kafka. For \u00e5 kj\u00f8re v\u00e5r test-app m\u00e5 du sette opp hele riggen v\u00e5r med docker-compose. Hvis du ikke er godt kjent med docker-compose anbefaler jeg deg heller \u00e5 se p\u00e5 denne appen , men bruk gjerne dittnav-event-test-producer som inspirasjon.","title":"DittNAV-event-test-producer"},{"location":"eksempler/#testing-lokalt","text":"","title":"Testing lokalt"},{"location":"eksternvarsling/","text":"Ekstern varsling NB !! Betaversjon !! Snakk med Team DittNav f\u00f8r du bruker dette feltet. Det er mulig \u00e5 sende ekstern varsling p\u00e5 e-post og/eller SMS til sluttbruker om ny beskjed eller oppgave p\u00e5 forsiden av Ditt NAV. Skjemaene for Beskjed og Oppgave inneholder et felt som brukes for \u00e5 indikere dette, eksternVarsling . Feltet er ikke p\u00e5krevet, og har default-verdien false . Settes dette til true vil det bestilles varsling. Rent praktisk foreg\u00e5r dette ved at DittNAV da oppretter et Kafka-event p\u00e5 en topic tilh\u00f8rende Team Dokumentl\u00f8sninger. Det er Team Dokument som st\u00e5r for selve varselutsendingen, gjennom tjenesten doknotifikasjon. For \u00e5 ta dette i bruk m\u00e5 alle produsenter ha et forhold til Kafka-topic-en aapen-dok-notifikasjon-status . Team Dokumentl\u00f8sninger skriver alle hendelser i forbindelse med en varselbestilling til denne topic-en, og her m\u00e5 produsenten overv\u00e5ke status til eventet som er sendt. Produsenten m\u00e5 selv vurdere om det er behov for \u00e5 agere p\u00e5 hendelsen. Les mer om mulige statuser her . Tilgang til topic kan f\u00e5s ved \u00e5 kontakte Team Dokumentl\u00f8sninger p\u00e5 #team-dokumentl\u00f8sninger. Generell informasjon: Det bestilles varsel til b\u00e5de SMS og epost. Team Dokumentl\u00f8sninger henter kontaktinformasjonen til sluttbruker og det er dette som til slutt avgj\u00f8r hvilken kanal det kan varsles i. Les mer om dette her . All SMS og e-post f\u00e5r en standard tekst. Se SMS-tekst her beskjed / oppgave og epost-tekst her beskjed / oppgave . For oppgave-eventer sender Team Dokumentl\u00f8sninger kun \u00e9n re-notifikasjon p\u00e5 nytt (SMS/epost) Det er 7 dager mellom notifikasjon og re-notifikasjonen blir sendt. Re-notifikasjon avbestilles hvis vi mottar Done-event for oppgaven. Beskjed-event st\u00f8tter ikke re-notifikasjon.","title":"Ekstern varsling"},{"location":"eksternvarsling/#ekstern-varsling","text":"","title":"Ekstern varsling"},{"location":"eksternvarsling/#nb-betaversjon-snakk-med-team-dittnav-fr-du-bruker-dette-feltet","text":"Det er mulig \u00e5 sende ekstern varsling p\u00e5 e-post og/eller SMS til sluttbruker om ny beskjed eller oppgave p\u00e5 forsiden av Ditt NAV. Skjemaene for Beskjed og Oppgave inneholder et felt som brukes for \u00e5 indikere dette, eksternVarsling . Feltet er ikke p\u00e5krevet, og har default-verdien false . Settes dette til true vil det bestilles varsling. Rent praktisk foreg\u00e5r dette ved at DittNAV da oppretter et Kafka-event p\u00e5 en topic tilh\u00f8rende Team Dokumentl\u00f8sninger. Det er Team Dokument som st\u00e5r for selve varselutsendingen, gjennom tjenesten doknotifikasjon. For \u00e5 ta dette i bruk m\u00e5 alle produsenter ha et forhold til Kafka-topic-en aapen-dok-notifikasjon-status . Team Dokumentl\u00f8sninger skriver alle hendelser i forbindelse med en varselbestilling til denne topic-en, og her m\u00e5 produsenten overv\u00e5ke status til eventet som er sendt. Produsenten m\u00e5 selv vurdere om det er behov for \u00e5 agere p\u00e5 hendelsen. Les mer om mulige statuser her . Tilgang til topic kan f\u00e5s ved \u00e5 kontakte Team Dokumentl\u00f8sninger p\u00e5 #team-dokumentl\u00f8sninger. Generell informasjon: Det bestilles varsel til b\u00e5de SMS og epost. Team Dokumentl\u00f8sninger henter kontaktinformasjonen til sluttbruker og det er dette som til slutt avgj\u00f8r hvilken kanal det kan varsles i. Les mer om dette her . All SMS og e-post f\u00e5r en standard tekst. Se SMS-tekst her beskjed / oppgave og epost-tekst her beskjed / oppgave . For oppgave-eventer sender Team Dokumentl\u00f8sninger kun \u00e9n re-notifikasjon p\u00e5 nytt (SMS/epost) Det er 7 dager mellom notifikasjon og re-notifikasjonen blir sendt. Re-notifikasjon avbestilles hvis vi mottar Done-event for oppgaven. Beskjed-event st\u00f8tter ikke re-notifikasjon.","title":"NB !! Betaversjon !! Snakk med Team DittNav f\u00f8r du bruker dette feltet."},{"location":"faq/","text":"FAQ Kan eventer reaktiveres? Nei, eventer kan ikke reaktiveres. Hvis det f\u00f8rst har blitt sendt minst ett done-event for en brukernotifikasjon s\u00e5 vil eventet bli satt inaktivt. Hvordan oppn\u00e5 samme effekt Send et done-event for eventer man vil deaktivere. Send deretter en ny brukernotifikasjon. Hva er grupperingsid ? Feltet brukes til \u00e5 vise at eventer naturlig h\u00f8rer sammen, for eksempel at de tilh\u00f8rer samme sak, s\u00f8knad, etc. Hvis flere eventer fra samme produsent, tilh\u00f8rende samme bruker, har samme grupperingsid vil de kunne grupperes sammen. Dette kan for eksempel visualiseres ved hjelp av en tidslinje . Kan vi sende et nytt event for \u00e5 kvittere ut det opprinnelige eventet? Nei. Dersom oppgaven eller beskjeden i et event skal markeres som utf\u00f8rt, lest, ikke lenger relevant o.l., skal det sendes et done-event . Vi har sendt event med feil lenke/tekst. Hva gj\u00f8r vi? Dere kan selv sende done-event . Da vil beskjeden/oppgaven bli deaktivert og dere kan sende ett nytt event med rett info. Eventet vil v\u00e6re synlig p\u00e5 historikksiden s\u00e5 det kan v\u00e6re lurt \u00e5 skrive for eksempel \"Beklager, det var feil lenke i den forrige beskjeden\", s\u00e5 sluttbruker ikke blir forvirret med to like beskjeder/oppgaver p\u00e5 historikksiden. Hvis vi sender to eventer med samme n\u00f8kkel, vil nyeste event overskrive det opprinnelige? Nei, siden vi allerede har et event med samme n\u00f8kkel vil det siste eventet ikke bli skrevet til v\u00e5r event-cache, og dermed heller ikke vist p\u00e5 Ditt NAV. Noe av grunnen til det er at vi \u00f8nsker \u00e5 kunne bygge opp tidslinjer basert p\u00e5 alt som har skjedd innenfor den samme grupperingsId-en. Hvordan kan vi se om eventene vi produserer blir mottatt? Man kan se antall prosesserte eventer pr. produsent i et Grafana-board . Se ellers flere detaljer under \"Metrics\" M\u00e5 eventid-en v\u00e6re unik? Ja. Event-id-en som settes m\u00e5 v\u00e6re unik pr. systembruker og eventtype. Se flere detaljer under Eventtyper Hvorfor kan vi ikke skrive mer tekst i eventene? Tanken er at eventene gir bruker beskjed om at noe har skjedd/noe m\u00e5 gj\u00f8res, men at handlingen hovedsakelig skal skje i de respektive innsynsl\u00f8sninger og domener. Visning av st\u00f8rre mengder domenespesifikk tekst i Ditt NAV er ikke hensiktsmessig, og bryter med tanken om at Ditt NAV skal v\u00e6re en felles inngangsport til de ulike tjenestene. Hvem eier dataene som ligger lagret i eventene? Kafka-topicene eies av #team-personbruker, men den enkelte produsent har selv ansvar for innholdet i det enkelte event. For \u00e5 f\u00e5 skrivetilgang m\u00e5 man som produsent bekrefte at man har forst\u00e5tt hva dette ansvaret inneb\u00e6rer. Se mer under Komme i gang Kan vi bruke akt\u00f8rid istedenfor f\u00f8dselsnummer for \u00e5 identifisere brukeren? Nei, vi st\u00f8tter kun f\u00f8dselsnummer som identifikator for en bruker. Hva er retention-tiden p\u00e5 brukernotfikasjon-topicene? Alle brukernotifikasjons-topic-ene har uendelig retention. Kan det sendes varsel p\u00e5 SMS og/eller e-post til bruker samtidig som det opprettes Brukernotifikasjon p\u00e5 Ditt NAV? Ja. Se mer informasjon om dette under Ekstern varsling Kan vi sette v\u00e5r egen tekst i varsel p\u00e5 SMS og e-post? Nei. Det sendes en pre-definert standard tekst, som ikke avsl\u00f8rer noen sensitiv informasjon om hva brukerens varsel gjelder. Kan vi sende lenker i varselene? Nei. Teksten i varslene inneholder informasjon til brukeren om \u00e5 logge seg inn p\u00e5 Ditt NAV, men inneholder ikke lenker brukeren kan trykke p\u00e5.","title":"FAQ"},{"location":"faq/#faq","text":"","title":"FAQ"},{"location":"faq/#kan-eventer-reaktiveres","text":"Nei, eventer kan ikke reaktiveres. Hvis det f\u00f8rst har blitt sendt minst ett done-event for en brukernotifikasjon s\u00e5 vil eventet bli satt inaktivt.","title":"Kan eventer reaktiveres?"},{"location":"faq/#hvordan-oppna-samme-effekt","text":"Send et done-event for eventer man vil deaktivere. Send deretter en ny brukernotifikasjon.","title":"Hvordan oppn\u00e5 samme effekt"},{"location":"faq/#hva-er-grupperingsid","text":"Feltet brukes til \u00e5 vise at eventer naturlig h\u00f8rer sammen, for eksempel at de tilh\u00f8rer samme sak, s\u00f8knad, etc. Hvis flere eventer fra samme produsent, tilh\u00f8rende samme bruker, har samme grupperingsid vil de kunne grupperes sammen. Dette kan for eksempel visualiseres ved hjelp av en tidslinje .","title":"Hva er grupperingsid?"},{"location":"faq/#kan-vi-sende-et-nytt-event-for-a-kvittere-ut-det-opprinnelige-eventet","text":"Nei. Dersom oppgaven eller beskjeden i et event skal markeres som utf\u00f8rt, lest, ikke lenger relevant o.l., skal det sendes et done-event .","title":"Kan vi sende et nytt event for \u00e5 kvittere ut det opprinnelige eventet?"},{"location":"faq/#vi-har-sendt-event-med-feil-lenketekst-hva-gjr-vi","text":"Dere kan selv sende done-event . Da vil beskjeden/oppgaven bli deaktivert og dere kan sende ett nytt event med rett info. Eventet vil v\u00e6re synlig p\u00e5 historikksiden s\u00e5 det kan v\u00e6re lurt \u00e5 skrive for eksempel \"Beklager, det var feil lenke i den forrige beskjeden\", s\u00e5 sluttbruker ikke blir forvirret med to like beskjeder/oppgaver p\u00e5 historikksiden.","title":"Vi har sendt event med feil lenke/tekst. Hva gj\u00f8r vi?"},{"location":"faq/#hvis-vi-sender-to-eventer-med-samme-nkkel-vil-nyeste-event-overskrive-det-opprinnelige","text":"Nei, siden vi allerede har et event med samme n\u00f8kkel vil det siste eventet ikke bli skrevet til v\u00e5r event-cache, og dermed heller ikke vist p\u00e5 Ditt NAV. Noe av grunnen til det er at vi \u00f8nsker \u00e5 kunne bygge opp tidslinjer basert p\u00e5 alt som har skjedd innenfor den samme grupperingsId-en.","title":"Hvis vi sender to eventer med samme n\u00f8kkel, vil nyeste event overskrive det opprinnelige?"},{"location":"faq/#hvordan-kan-vi-se-om-eventene-vi-produserer-blir-mottatt","text":"Man kan se antall prosesserte eventer pr. produsent i et Grafana-board . Se ellers flere detaljer under \"Metrics\"","title":"Hvordan kan vi se om eventene vi produserer blir mottatt?"},{"location":"faq/#ma-eventid-en-vre-unik","text":"Ja. Event-id-en som settes m\u00e5 v\u00e6re unik pr. systembruker og eventtype. Se flere detaljer under Eventtyper","title":"M\u00e5 eventid-en v\u00e6re unik?"},{"location":"faq/#hvorfor-kan-vi-ikke-skrive-mer-tekst-i-eventene","text":"Tanken er at eventene gir bruker beskjed om at noe har skjedd/noe m\u00e5 gj\u00f8res, men at handlingen hovedsakelig skal skje i de respektive innsynsl\u00f8sninger og domener. Visning av st\u00f8rre mengder domenespesifikk tekst i Ditt NAV er ikke hensiktsmessig, og bryter med tanken om at Ditt NAV skal v\u00e6re en felles inngangsport til de ulike tjenestene.","title":"Hvorfor kan vi ikke skrive mer tekst i eventene?"},{"location":"faq/#hvem-eier-dataene-som-ligger-lagret-i-eventene","text":"Kafka-topicene eies av #team-personbruker, men den enkelte produsent har selv ansvar for innholdet i det enkelte event. For \u00e5 f\u00e5 skrivetilgang m\u00e5 man som produsent bekrefte at man har forst\u00e5tt hva dette ansvaret inneb\u00e6rer. Se mer under Komme i gang","title":"Hvem eier dataene som ligger lagret i eventene?"},{"location":"faq/#kan-vi-bruke-aktrid-istedenfor-fdselsnummer-for-a-identifisere-brukeren","text":"Nei, vi st\u00f8tter kun f\u00f8dselsnummer som identifikator for en bruker.","title":"Kan vi bruke akt\u00f8rid istedenfor f\u00f8dselsnummer for \u00e5 identifisere brukeren?"},{"location":"faq/#hva-er-retention-tiden-pa-brukernotfikasjon-topicene","text":"Alle brukernotifikasjons-topic-ene har uendelig retention.","title":"Hva er retention-tiden p\u00e5 brukernotfikasjon-topicene?"},{"location":"faq/#kan-det-sendes-varsel-pa-sms-ogeller-e-post-til-bruker-samtidig-som-det-opprettes-brukernotifikasjon-pa-ditt-nav","text":"Ja. Se mer informasjon om dette under Ekstern varsling","title":"Kan det sendes varsel p\u00e5 SMS og/eller e-post til bruker samtidig som det opprettes Brukernotifikasjon p\u00e5 Ditt NAV?"},{"location":"faq/#kan-vi-sette-var-egen-tekst-i-varsel-pa-sms-og-e-post","text":"Nei. Det sendes en pre-definert standard tekst, som ikke avsl\u00f8rer noen sensitiv informasjon om hva brukerens varsel gjelder.","title":"Kan vi sette v\u00e5r egen tekst i varsel p\u00e5 SMS og e-post?"},{"location":"faq/#kan-vi-sende-lenker-i-varselene","text":"Nei. Teksten i varslene inneholder informasjon til brukeren om \u00e5 logge seg inn p\u00e5 Ditt NAV, men inneholder ikke lenker brukeren kan trykke p\u00e5.","title":"Kan vi sende lenker i varselene?"},{"location":"feilsoking/","text":"Feils\u00f8king Verifiser at alt gikk bra med prosesseringen av eventet: Sjekk i Grafana Sjekk loggene for dittnav-event-aggregator, som er appen som leser inn eventene fra Kafka.","title":"Feils\u00f8king"},{"location":"feilsoking/#feilsking","text":"Verifiser at alt gikk bra med prosesseringen av eventet: Sjekk i Grafana Sjekk loggene for dittnav-event-aggregator, som er appen som leser inn eventene fra Kafka.","title":"Feils\u00f8king"},{"location":"komme_i_gang/","text":"Komme i gang Velg rett eventtype. Les gjennom eventtypene her . Se p\u00e5 dette eksemplet. Her finner du v\u00e5re schemas. Biblioteket finner du her . Se ogs\u00e5 p\u00e5 kodeeksemplet til valgt event-type. For eksempel Beskjed . Bestill tilgang til dev-topic her . Publiser et event i dev og verifiser at det fungerer: Verifiser at eventene som produseres dukker opp i grafanaboardet 'Brukernotifikasjoner per produsent' . Velg din systembruker -mapping i nedtrekkslisten producer . Se mapping av systembruker her . Feils\u00f8king se her . Logg inn p\u00e5 DittNAV i dev og verifiser at eventet dukker opp p\u00e5 forsiden. Produser noen eventer og verifiser at det fungerer som det skal i dev. Kontakt Team Personbruker p\u00e5 Slack #brukernotifikasjoner s\u00e5 vi kan g\u00e5 gjennom feltverdiene, slik at vi er sikre p\u00e5 at vi bruker de p\u00e5 samme m\u00e5te. Bestill tilgang til prod-topic-en her .","title":"Komme i gang"},{"location":"komme_i_gang/#komme-i-gang","text":"Velg rett eventtype. Les gjennom eventtypene her . Se p\u00e5 dette eksemplet. Her finner du v\u00e5re schemas. Biblioteket finner du her . Se ogs\u00e5 p\u00e5 kodeeksemplet til valgt event-type. For eksempel Beskjed . Bestill tilgang til dev-topic her . Publiser et event i dev og verifiser at det fungerer: Verifiser at eventene som produseres dukker opp i grafanaboardet 'Brukernotifikasjoner per produsent' . Velg din systembruker -mapping i nedtrekkslisten producer . Se mapping av systembruker her . Feils\u00f8king se her . Logg inn p\u00e5 DittNAV i dev og verifiser at eventet dukker opp p\u00e5 forsiden. Produser noen eventer og verifiser at det fungerer som det skal i dev. Kontakt Team Personbruker p\u00e5 Slack #brukernotifikasjoner s\u00e5 vi kan g\u00e5 gjennom feltverdiene, slik at vi er sikre p\u00e5 at vi bruker de p\u00e5 samme m\u00e5te. Bestill tilgang til prod-topic-en her .","title":"Komme i gang"},{"location":"kontakt/","text":"Kontakt Team Personbruker Slack #brukernotifikasjoner","title":"Kontakt"},{"location":"kontakt/#kontakt","text":"","title":"Kontakt"},{"location":"kontakt/#team","text":"Personbruker","title":"Team"},{"location":"kontakt/#slack","text":"#brukernotifikasjoner","title":"Slack"},{"location":"metrics/","text":"Metrics DittNAV-teamet har laget et par granfa-dashbards som kan brukes for \u00e5 verifisere at alt fungerer som det skal. Prosessering Viser info om den l\u00f8pende prosesseringen av eventer: Prosesseringstid Antall eventer motatt. Antall felende eventer. Topic vs cache Metrics som oppdateres hvert femte minutt for \u00e5 verifisere at alt unikt innhold p\u00e5 topic-ene har havnet i DittNAVs-event-cache. Dashboardet finnes her. Totaloversikt Alle eventer sett under ett: Info om eventuell diff, mellom hva som finnes av eventer p\u00e5 kafka-topic-ene og hva som finnes i cache-en. Visualisert per eventtype. Dashboardet finnes her. Oversikt per team Alle eventer gruppert per systembruker/produsent: Info om eventuell diff, mellom hva som finnes av eventer p\u00e5 kafka-topic-ene og hva som finnes i cache-en. Visualisert per eventtype. Dashboardet finnes her.","title":"Metrics"},{"location":"metrics/#metrics","text":"DittNAV-teamet har laget et par granfa-dashbards som kan brukes for \u00e5 verifisere at alt fungerer som det skal.","title":"Metrics"},{"location":"metrics/#prosessering","text":"Viser info om den l\u00f8pende prosesseringen av eventer: Prosesseringstid Antall eventer motatt. Antall felende eventer.","title":"Prosessering"},{"location":"metrics/#topic-vs-cache","text":"Metrics som oppdateres hvert femte minutt for \u00e5 verifisere at alt unikt innhold p\u00e5 topic-ene har havnet i DittNAVs-event-cache. Dashboardet finnes her.","title":"Topic vs cache"},{"location":"metrics/#totaloversikt","text":"Alle eventer sett under ett: Info om eventuell diff, mellom hva som finnes av eventer p\u00e5 kafka-topic-ene og hva som finnes i cache-en. Visualisert per eventtype. Dashboardet finnes her.","title":"Totaloversikt"},{"location":"metrics/#oversikt-per-team","text":"Alle eventer gruppert per systembruker/produsent: Info om eventuell diff, mellom hva som finnes av eventer p\u00e5 kafka-topic-ene og hva som finnes i cache-en. Visualisert per eventtype. Dashboardet finnes her.","title":"Oversikt per team"},{"location":"tidslinjer/","text":"Tidslinjer NB! Betaversjon Grupperer sammen eventer som naturlig h\u00f8rer sammen. M\u00e5ten eventene grupperes sammen p\u00e5 i en tidslinje er basert p\u00e5 feltet grupperingsId , som typisk er en saksid, s\u00f8knadsid el. DittNAV team-et tilbyr en tjeneste for \u00e5 hente ut alle eventer tilknyttet en konkret bruker og en grupperingsid . Disse eventene kan brukes for \u00e5 bygge opp en tidslinje, enten med \u00e5 bruke DittNAV-teamets tidslinje-komponent eller ved \u00e5 bruke dataene direkte selv.","title":"Tidslinjer"},{"location":"tidslinjer/#tidslinjer","text":"NB! Betaversjon Grupperer sammen eventer som naturlig h\u00f8rer sammen. M\u00e5ten eventene grupperes sammen p\u00e5 i en tidslinje er basert p\u00e5 feltet grupperingsId , som typisk er en saksid, s\u00f8knadsid el. DittNAV team-et tilbyr en tjeneste for \u00e5 hente ut alle eventer tilknyttet en konkret bruker og en grupperingsid . Disse eventene kan brukes for \u00e5 bygge opp en tidslinje, enten med \u00e5 bruke DittNAV-teamets tidslinje-komponent eller ved \u00e5 bruke dataene direkte selv.","title":"Tidslinjer"},{"location":"eventtyper/fellesinfo/","text":"Alle brukernotifikasjoner best\u00e5r av en key og en value som legges p\u00e5 kafka-topicene. Alle eventtypene bruker Nokkel som key, mens hver eventtype har sin egen value. Se egene underkapitler for dette ( Beskjed , Oppgave , Done og Statusoppdatering ). Husk \u00e5 bruk builderene v\u00e5re for \u00e5 validere alle eventer. Les mer om dette her . Hva gj\u00f8r et event unikt? Kafka key (Nokkel) Feltene i Nokkel er som en kompositt-n\u00f8kkel for \u00e5 unikt identifisere eventet. systembruker Navn p\u00e5 systembruker som har produsert eventet. Feltet har en begrensning p\u00e5 100 tegn og kan ikke v\u00e6re null. eventId Den unike identifikatoren per event, og den m\u00e5 v\u00e6re unik for hver systembruker (produsent). Det er denne eventID -en som benyttes for \u00e5 deaktivere eventer som er utf\u00f8rt. Dette gj\u00f8res ved \u00e5 sende et event av typen done, med referanse til det eventet som ikke skal vises p\u00e5 DittNAV lengre. Feltet har en begrensning p\u00e5 50 tegn og kan ikke v\u00e6re null. Schemas Du finner Nokkel-schemas her .","title":"Fellesinfo"},{"location":"eventtyper/fellesinfo/#hva-gjr-et-event-unikt","text":"","title":"Hva gj\u00f8r et event unikt?"},{"location":"eventtyper/fellesinfo/#kafka-key-nokkel","text":"Feltene i Nokkel er som en kompositt-n\u00f8kkel for \u00e5 unikt identifisere eventet.","title":"Kafka key (Nokkel)"},{"location":"eventtyper/fellesinfo/#systembruker","text":"Navn p\u00e5 systembruker som har produsert eventet. Feltet har en begrensning p\u00e5 100 tegn og kan ikke v\u00e6re null.","title":"systembruker"},{"location":"eventtyper/fellesinfo/#eventid","text":"Den unike identifikatoren per event, og den m\u00e5 v\u00e6re unik for hver systembruker (produsent). Det er denne eventID -en som benyttes for \u00e5 deaktivere eventer som er utf\u00f8rt. Dette gj\u00f8res ved \u00e5 sende et event av typen done, med referanse til det eventet som ikke skal vises p\u00e5 DittNAV lengre. Feltet har en begrensning p\u00e5 50 tegn og kan ikke v\u00e6re null.","title":"eventId"},{"location":"eventtyper/fellesinfo/#schemas","text":"Du finner Nokkel-schemas her .","title":"Schemas"},{"location":"eventtyper/beskjed/beskrivelse/","text":"Beskrivelse Dette er en typisk melding til sluttbrukeren. For eksempel, \u00abDu sendte en s\u00f8knad om <...>\u00bb.","title":"Beskrivelse"},{"location":"eventtyper/beskjed/beskrivelse/#beskrivelse","text":"Dette er en typisk melding til sluttbrukeren. For eksempel, \u00abDu sendte en s\u00f8knad om <...>\u00bb.","title":"Beskrivelse"},{"location":"eventtyper/beskjed/felter/","text":"Feltbeskrivelser Nokkel (Kafka key) Se Nokkel Beskjed (Kafka value) Beskrivelse av feltene til eventet Beskjed . Husk \u00e5 validere alle eventene med builderene v\u00e5re. Les mer om dette her . tidspunkt Et tidspunkt som noe skjedde, f.eks. da saksbehandlingen av en s\u00f8knad var ferdig. fodselsnummer F\u00f8dselsnummeret til brukeren som eventet tilh\u00f8rer. Feltet har en begrensning p\u00e5 11 tegn og kan ikke v\u00e6re null. Validering skjer her . grupperingsId Feltet grupperingsId brukes for \u00e5 kunne samle alle eventer som h\u00f8rer til en sak, s\u00f8knad eller et dokument. Dette er typisk en saksId, s\u00f8knadsId eller dokumentId, men dere velger selv hvilken verdi dere putter der. Men det er viktig at det er samme verdi for alle eventer som skal grupperes sammen. Typisk bruk for dette feltet vil v\u00e6re oppbygging av tidslinjer. Feltet har en begrensning p\u00e5 100 tegn og kan ikke v\u00e6re null. Validering skjer her . tekst Dette er teksten som faktisk vises i eventet. Det er ikke noen st\u00f8tte for \u00e5 formatere teksten som settes i dette feltet. Feltet har en begrensning p\u00e5 300 tegn og kan ikke v\u00e6re null. Validering skjer her . link Dette er lenken som blir aktivert i det en bruker trykker p\u00e5 selve eventet. En lenke m\u00e5 v\u00e6re en komplett URL, inkludert https protokoll. Feltet har en begrensning p\u00e5 200 tegn. Produsenten kan sende inn en tom String. Da vil ikke link v\u00e6re synlig for sluttbruker. Validering skjer her . sikkerhetsnivaa Angir sikkerhetsniv\u00e5et for informasjonen som eventet innholder. DittNAV st\u00f8tter at en bruker er innlogget p\u00e5 niv\u00e5 3, hvis denne brukeren har eventer med niv\u00e5 4 s\u00e5 vil disse eventene bli \"gr\u00e5et ut\". Brukeren ser bare hvilken type event dette er, men ikke noe av innholdet. For \u00e5 se innholdet m\u00e5 brukeren steppe opp til et h\u00f8yere innloggingsniv\u00e5. synligFremTil Et tidspunkt p\u00e5 n\u00e5r eventet ikke skal v\u00e6re synlig mer, f.eks beskjeden skal kun v\u00e6re synlig 7 dager. SynligFramTil = null -> synlig for alltid, med mindre brukeren selv krysser den ut fra forsiden av DittNAV. eksternvarsling !! NB !! Betaversjon !! Snakk med DittNav f\u00f8r du bruker dette feltet. Default verdien til dette feltet er false , men hvis det blir satt til true vil beskjed-en bli varslet p\u00e5 SMS/epost. Les mer om eksternvarsling her . Schemas Du finner Beskjed-schemas her .","title":"Feltbeskrivelser"},{"location":"eventtyper/beskjed/felter/#feltbeskrivelser","text":"","title":"Feltbeskrivelser"},{"location":"eventtyper/beskjed/felter/#nokkel-kafka-key","text":"Se Nokkel","title":"Nokkel (Kafka key)"},{"location":"eventtyper/beskjed/felter/#beskjed-kafka-value","text":"Beskrivelse av feltene til eventet Beskjed . Husk \u00e5 validere alle eventene med builderene v\u00e5re. Les mer om dette her .","title":"Beskjed (Kafka value)"},{"location":"eventtyper/beskjed/felter/#tidspunkt","text":"Et tidspunkt som noe skjedde, f.eks. da saksbehandlingen av en s\u00f8knad var ferdig.","title":"tidspunkt"},{"location":"eventtyper/beskjed/felter/#fodselsnummer","text":"F\u00f8dselsnummeret til brukeren som eventet tilh\u00f8rer. Feltet har en begrensning p\u00e5 11 tegn og kan ikke v\u00e6re null. Validering skjer her .","title":"fodselsnummer"},{"location":"eventtyper/beskjed/felter/#grupperingsid","text":"Feltet grupperingsId brukes for \u00e5 kunne samle alle eventer som h\u00f8rer til en sak, s\u00f8knad eller et dokument. Dette er typisk en saksId, s\u00f8knadsId eller dokumentId, men dere velger selv hvilken verdi dere putter der. Men det er viktig at det er samme verdi for alle eventer som skal grupperes sammen. Typisk bruk for dette feltet vil v\u00e6re oppbygging av tidslinjer. Feltet har en begrensning p\u00e5 100 tegn og kan ikke v\u00e6re null. Validering skjer her .","title":"grupperingsId"},{"location":"eventtyper/beskjed/felter/#tekst","text":"Dette er teksten som faktisk vises i eventet. Det er ikke noen st\u00f8tte for \u00e5 formatere teksten som settes i dette feltet. Feltet har en begrensning p\u00e5 300 tegn og kan ikke v\u00e6re null. Validering skjer her .","title":"tekst"},{"location":"eventtyper/beskjed/felter/#link","text":"Dette er lenken som blir aktivert i det en bruker trykker p\u00e5 selve eventet. En lenke m\u00e5 v\u00e6re en komplett URL, inkludert https protokoll. Feltet har en begrensning p\u00e5 200 tegn. Produsenten kan sende inn en tom String. Da vil ikke link v\u00e6re synlig for sluttbruker. Validering skjer her .","title":"link"},{"location":"eventtyper/beskjed/felter/#sikkerhetsnivaa","text":"Angir sikkerhetsniv\u00e5et for informasjonen som eventet innholder. DittNAV st\u00f8tter at en bruker er innlogget p\u00e5 niv\u00e5 3, hvis denne brukeren har eventer med niv\u00e5 4 s\u00e5 vil disse eventene bli \"gr\u00e5et ut\". Brukeren ser bare hvilken type event dette er, men ikke noe av innholdet. For \u00e5 se innholdet m\u00e5 brukeren steppe opp til et h\u00f8yere innloggingsniv\u00e5.","title":"sikkerhetsnivaa"},{"location":"eventtyper/beskjed/felter/#synligfremtil","text":"Et tidspunkt p\u00e5 n\u00e5r eventet ikke skal v\u00e6re synlig mer, f.eks beskjeden skal kun v\u00e6re synlig 7 dager. SynligFramTil = null -> synlig for alltid, med mindre brukeren selv krysser den ut fra forsiden av DittNAV.","title":"synligFremTil"},{"location":"eventtyper/beskjed/felter/#eksternvarsling","text":"!! NB !! Betaversjon !! Snakk med DittNav f\u00f8r du bruker dette feltet. Default verdien til dette feltet er false , men hvis det blir satt til true vil beskjed-en bli varslet p\u00e5 SMS/epost. Les mer om eksternvarsling her .","title":"eksternvarsling"},{"location":"eventtyper/beskjed/felter/#schemas","text":"Du finner Beskjed-schemas her .","title":"Schemas"},{"location":"eventtyper/beskjed/kodeeksempel/","text":"Kodeeksempel Java String topicnavn = \"aapen-brukernotifikasjon-nyBeskjed-v1-testing\"; Nokkel nokkel = createNokkel(); Beskjed beskjed = createBeskjed(); final ProducerRecord<Nokkel, Beskjed> record = new ProducerRecord<>(topicnavn, nokkel, beskjed); producer.send(record); Se et komplett eksempel her . Kotlin val topicnavn : String = \"aapen-brukernotifikasjon-nyBeskjed-v1-testing\" val key : Nokkel = createKeyForEvent(systembruker) val event : Beskjed = createBeskjedForIdent(innloggetBruker, dto) val producerRecord = ProducerRecord(topicName, key, event) kafkaProducer.send(producerRecord) Se et komplett eksempel her .","title":"Kodeeksempel"},{"location":"eventtyper/beskjed/kodeeksempel/#kodeeksempel","text":"","title":"Kodeeksempel"},{"location":"eventtyper/beskjed/kodeeksempel/#java","text":"String topicnavn = \"aapen-brukernotifikasjon-nyBeskjed-v1-testing\"; Nokkel nokkel = createNokkel(); Beskjed beskjed = createBeskjed(); final ProducerRecord<Nokkel, Beskjed> record = new ProducerRecord<>(topicnavn, nokkel, beskjed); producer.send(record); Se et komplett eksempel her .","title":"Java"},{"location":"eventtyper/beskjed/kodeeksempel/#kotlin","text":"val topicnavn : String = \"aapen-brukernotifikasjon-nyBeskjed-v1-testing\" val key : Nokkel = createKeyForEvent(systembruker) val event : Beskjed = createBeskjedForIdent(innloggetBruker, dto) val producerRecord = ProducerRecord(topicName, key, event) kafkaProducer.send(producerRecord) Se et komplett eksempel her .","title":"Kotlin"},{"location":"eventtyper/beskjed/paa_dittnav/","text":"Visning p\u00e5 DittNAV DittNAV sender done-event p\u00e5 beskjed-event , siden brukeren selv kan klikke bort disse eventene n\u00e5r beskjeden er mottatt. Deaktiverte eventer vil fortsatt v\u00e6re tilgjengelig fra historikk-visningen p\u00e5 DittNAV.","title":"Visning p\u00e5 DittNAV"},{"location":"eventtyper/beskjed/paa_dittnav/#visning-pa-dittnav","text":"DittNAV sender done-event p\u00e5 beskjed-event , siden brukeren selv kan klikke bort disse eventene n\u00e5r beskjeden er mottatt. Deaktiverte eventer vil fortsatt v\u00e6re tilgjengelig fra historikk-visningen p\u00e5 DittNAV.","title":"Visning p\u00e5 DittNAV"},{"location":"eventtyper/beskjed/topic/","text":"Kafka topics Milj\u00f8 Topic-navn dev aapen-brukernotifikasjon-nyBeskjed-v1 prod aapen-brukernotifikasjon-nyBeskjed-v1 Tilgang Tilgang til topic-ene kan bestilles ved \u00e5 opprette en pull-request mot dette repo-et .","title":"Kafka topics"},{"location":"eventtyper/beskjed/topic/#kafka-topics","text":"Milj\u00f8 Topic-navn dev aapen-brukernotifikasjon-nyBeskjed-v1 prod aapen-brukernotifikasjon-nyBeskjed-v1","title":"Kafka topics"},{"location":"eventtyper/beskjed/topic/#tilgang","text":"Tilgang til topic-ene kan bestilles ved \u00e5 opprette en pull-request mot dette repo-et .","title":"Tilgang"},{"location":"eventtyper/done/beskrivelse/","text":"Beskrivelse Done sendes n\u00e5r oppgaven er utf\u00f8rt. Hvis vi bruker samme eksempel som over ville du sendt et done-event n\u00e5r sluttbrukeren har lastet opp vedlegget. Done-event m\u00e5 ha samme Nokkel, f\u00f8dselsnummer og grupperingsid som Oppgaven/Beskjeden den skal deaktivere. DittNAV sender done-event p\u00e5 beskjed-event , siden brukeren selv kan klikke bort disse eventene n\u00e5r beskjeden er mottatt. Deaktiverte eventer vil fortsatt v\u00e6re tilgjengelig fra historikk-visningen p\u00e5 DittNAV.","title":"Beskrivelse"},{"location":"eventtyper/done/beskrivelse/#beskrivelse","text":"Done sendes n\u00e5r oppgaven er utf\u00f8rt. Hvis vi bruker samme eksempel som over ville du sendt et done-event n\u00e5r sluttbrukeren har lastet opp vedlegget. Done-event m\u00e5 ha samme Nokkel, f\u00f8dselsnummer og grupperingsid som Oppgaven/Beskjeden den skal deaktivere. DittNAV sender done-event p\u00e5 beskjed-event , siden brukeren selv kan klikke bort disse eventene n\u00e5r beskjeden er mottatt. Deaktiverte eventer vil fortsatt v\u00e6re tilgjengelig fra historikk-visningen p\u00e5 DittNAV.","title":"Beskrivelse"},{"location":"eventtyper/done/felter/","text":"Feltbeskrivelser Nokkel (Kafka key) Se Nokkel Done (Kafka value) Beskrivelse av feltene til eventet done . Husk \u00e5 validere alle eventene med builderene v\u00e5re. Les mer om dette her . tidspunkt Et tidspunkt som noe skjedde, f.eks. da saksbehandlingen av en s\u00f8knad var ferdig. fodselsnummer F\u00f8dselsnummeret til brukeren som eventet tilh\u00f8rer. Feltet har en begrensning p\u00e5 11 tegn og kan ikke v\u00e6re null. Validering skjer her . grupperingsId Dette feltet er med for eventtypen done for \u00e5 sikre at man f\u00e5r med alle eventer knyttet til en grupperingsId , og settet av eventer blir ikke komplett uten \u00e5 ha med done -eventene. Dette er bla viktig for \u00e5 kunne generere tidslinjer ut i fra eventer. Feltet har en begrensning p\u00e5 100 tegn og kan ikke v\u00e6re null. Schemas Du finner Done-schemas her .","title":"Feltbeskrivelser"},{"location":"eventtyper/done/felter/#feltbeskrivelser","text":"","title":"Feltbeskrivelser"},{"location":"eventtyper/done/felter/#nokkel-kafka-key","text":"Se Nokkel","title":"Nokkel (Kafka key)"},{"location":"eventtyper/done/felter/#done-kafka-value","text":"Beskrivelse av feltene til eventet done . Husk \u00e5 validere alle eventene med builderene v\u00e5re. Les mer om dette her .","title":"Done (Kafka value)"},{"location":"eventtyper/done/felter/#tidspunkt","text":"Et tidspunkt som noe skjedde, f.eks. da saksbehandlingen av en s\u00f8knad var ferdig.","title":"tidspunkt"},{"location":"eventtyper/done/felter/#fodselsnummer","text":"F\u00f8dselsnummeret til brukeren som eventet tilh\u00f8rer. Feltet har en begrensning p\u00e5 11 tegn og kan ikke v\u00e6re null. Validering skjer her .","title":"fodselsnummer"},{"location":"eventtyper/done/felter/#grupperingsid","text":"Dette feltet er med for eventtypen done for \u00e5 sikre at man f\u00e5r med alle eventer knyttet til en grupperingsId , og settet av eventer blir ikke komplett uten \u00e5 ha med done -eventene. Dette er bla viktig for \u00e5 kunne generere tidslinjer ut i fra eventer. Feltet har en begrensning p\u00e5 100 tegn og kan ikke v\u00e6re null.","title":"grupperingsId"},{"location":"eventtyper/done/felter/#schemas","text":"Du finner Done-schemas her .","title":"Schemas"},{"location":"eventtyper/done/kodeeksempel/","text":"Kodeeksempel Java String topicnavn = \"aapen-brukernotifikasjon-nyDone-v1-testing\"; Nokkel nokkel = createNokkel(); Done done = createDone(); final ProducerRecord<Nokkel, Done> record = new ProducerRecord<>(topicnavn, nokkel, done); producer.send(record); Samme prinsipp som Beskjed og Oppgave . Se et eksempel p\u00e5 Beskjed her . Kotlin val topicnavn : String = \"aapen-brukernotifikasjon-nyDone-v1-testing\" val key : Nokkel = createKeyForEvent(systembruker) val event : Done = createDoneForIdent(innloggetBruker, dto) val producerRecord = ProducerRecord(topicName, key, event) kafkaProducer.send(producerRecord) Se et komplett eksempel her .","title":"Kodeeksempel"},{"location":"eventtyper/done/kodeeksempel/#kodeeksempel","text":"","title":"Kodeeksempel"},{"location":"eventtyper/done/kodeeksempel/#java","text":"String topicnavn = \"aapen-brukernotifikasjon-nyDone-v1-testing\"; Nokkel nokkel = createNokkel(); Done done = createDone(); final ProducerRecord<Nokkel, Done> record = new ProducerRecord<>(topicnavn, nokkel, done); producer.send(record); Samme prinsipp som Beskjed og Oppgave . Se et eksempel p\u00e5 Beskjed her .","title":"Java"},{"location":"eventtyper/done/kodeeksempel/#kotlin","text":"val topicnavn : String = \"aapen-brukernotifikasjon-nyDone-v1-testing\" val key : Nokkel = createKeyForEvent(systembruker) val event : Done = createDoneForIdent(innloggetBruker, dto) val producerRecord = ProducerRecord(topicName, key, event) kafkaProducer.send(producerRecord) Se et komplett eksempel her .","title":"Kotlin"},{"location":"eventtyper/done/topic/","text":"Kafka topics Milj\u00f8 Topic-navn dev aapen-brukernotifikasjon-nyDone-v1 prod aapen-brukernotifikasjon-nyDone-v1 Tilgang Tilgang til topic-ene kan bestilles ved \u00e5 opprette en pull-request mot dette repo-et .","title":"Kafka topics"},{"location":"eventtyper/done/topic/#kafka-topics","text":"Milj\u00f8 Topic-navn dev aapen-brukernotifikasjon-nyDone-v1 prod aapen-brukernotifikasjon-nyDone-v1","title":"Kafka topics"},{"location":"eventtyper/done/topic/#tilgang","text":"Tilgang til topic-ene kan bestilles ved \u00e5 opprette en pull-request mot dette repo-et .","title":"Tilgang"},{"location":"eventtyper/oppgave/beskrivelse/","text":"Beskrivelse Oppgave brukes n\u00e5r du vil ha utf\u00f8rt en konkret oppgave. For eksempel, \u00abvi mangler et vedlegg. Send inn her <...>.\u00bb Brukeren kan ikke selv klikke bort et oppgave-event . S\u00e5 her m\u00e5 du som produsent sende et done-event p\u00e5 en egen done-topic , og dette done-eventet m\u00e5 ha samme Nokkel som oppgaven den skal markere som done. Alts\u00e5 done-eventet m\u00e5 ha samme event-id og systembruker som oppgave-eventet sitt event-id og systembruker . Done-eventet m\u00e5 ogs\u00e5 ha samme f\u00f8dselsnummer som oppgave-eventet . Vi ser for oss at event-id kan v\u00e6re en random UUID som unikt kobler beskjed/oppgaven til done-eventet.","title":"Beskrivelse"},{"location":"eventtyper/oppgave/beskrivelse/#beskrivelse","text":"Oppgave brukes n\u00e5r du vil ha utf\u00f8rt en konkret oppgave. For eksempel, \u00abvi mangler et vedlegg. Send inn her <...>.\u00bb Brukeren kan ikke selv klikke bort et oppgave-event . S\u00e5 her m\u00e5 du som produsent sende et done-event p\u00e5 en egen done-topic , og dette done-eventet m\u00e5 ha samme Nokkel som oppgaven den skal markere som done. Alts\u00e5 done-eventet m\u00e5 ha samme event-id og systembruker som oppgave-eventet sitt event-id og systembruker . Done-eventet m\u00e5 ogs\u00e5 ha samme f\u00f8dselsnummer som oppgave-eventet . Vi ser for oss at event-id kan v\u00e6re en random UUID som unikt kobler beskjed/oppgaven til done-eventet.","title":"Beskrivelse"},{"location":"eventtyper/oppgave/felter/","text":"Feltbeskrivelser Nokkel (Kafka key) Se Nokkel Oppgave (Kafka value) Beskrivelse av feltene til eventet Oppgave . Husk \u00e5 validere alle eventene med builderene v\u00e5re. Les mer om dette her . tidspunkt Et tidspunkt som noe skjedde, f.eks. da saksbehandlingen av en s\u00f8knad var ferdig. fodselsnummer F\u00f8dselsnummeret til brukeren som eventet tilh\u00f8rer. Feltet har en begrensning p\u00e5 11 tegn og kan ikke v\u00e6re null. Validering skjer her . grupperingsId Feltet grupperingsId brukes for \u00e5 kunne samle alle eventer som h\u00f8rer til en sak, s\u00f8knad eller et dokument. Dette er typisk en saksId, s\u00f8knadsId eller dokumentId, men dere velger selv hvilken verdi dere putter der. Men det er viktig at det er samme verdi for alle eventer som skal gruppers samme. Typisk bruk for dette feltet vil v\u00e6re oppbygging av tidslinjer. Feltet har en begrensning p\u00e5 100 tegn og kan ikke v\u00e6re null. Validering skjer her . tekst Dette er teksten som faktisk vises i eventet. Det er ikke noen st\u00f8tte for \u00e5 formatere teksten som settes i dette feltet. Feltet har en begrensning p\u00e5 500 tegn og kan ikke v\u00e6re null. Validering skjer her . link Dette er lenken som blir aktivert i det en bruker trykker p\u00e5 selve eventet. En lenke m\u00e5 v\u00e6re en komplett URL, inkludert https protokoll. Feltet har en begrensning p\u00e5 200 tegn, og kan ikke v\u00e6re null eller inneholde en tom streng. Validering skjer her . sikkerhetsnivaa Angir sikkerhetsniv\u00e5et for informasjonen som eventet innholder. DittNAV s\u00f8tter at en bruker er innlogget p\u00e5 niv\u00e5 3, hvis denne brukeren har eventer med niv\u00e5 4 s\u00e5 vil disse eventene bli \"gr\u00e5et ut\". Brukeren ser bare hvilken type event dette er, men ikke noe av innholdet. For \u00e5 se innholdet m\u00e5 brukeren steppe opp til et h\u00f8yere innloggingsniv\u00e5. eksternvarsling !! NB !! Betaversjon !! Snakk med DittNav f\u00f8r du bruker dette feltet. Default verdien til dette feltet er false , men hvis det blir satt til true vil oppgave-eventet bli varslet p\u00e5 SMS/epost. Les mer om eksternvarsling her . Schemas Du finner Oppgave-schemas her .","title":"Feltbeskrivelser"},{"location":"eventtyper/oppgave/felter/#feltbeskrivelser","text":"","title":"Feltbeskrivelser"},{"location":"eventtyper/oppgave/felter/#nokkel-kafka-key","text":"Se Nokkel","title":"Nokkel (Kafka key)"},{"location":"eventtyper/oppgave/felter/#oppgave-kafka-value","text":"Beskrivelse av feltene til eventet Oppgave . Husk \u00e5 validere alle eventene med builderene v\u00e5re. Les mer om dette her .","title":"Oppgave (Kafka value)"},{"location":"eventtyper/oppgave/felter/#tidspunkt","text":"Et tidspunkt som noe skjedde, f.eks. da saksbehandlingen av en s\u00f8knad var ferdig.","title":"tidspunkt"},{"location":"eventtyper/oppgave/felter/#fodselsnummer","text":"F\u00f8dselsnummeret til brukeren som eventet tilh\u00f8rer. Feltet har en begrensning p\u00e5 11 tegn og kan ikke v\u00e6re null. Validering skjer her .","title":"fodselsnummer"},{"location":"eventtyper/oppgave/felter/#grupperingsid","text":"Feltet grupperingsId brukes for \u00e5 kunne samle alle eventer som h\u00f8rer til en sak, s\u00f8knad eller et dokument. Dette er typisk en saksId, s\u00f8knadsId eller dokumentId, men dere velger selv hvilken verdi dere putter der. Men det er viktig at det er samme verdi for alle eventer som skal gruppers samme. Typisk bruk for dette feltet vil v\u00e6re oppbygging av tidslinjer. Feltet har en begrensning p\u00e5 100 tegn og kan ikke v\u00e6re null. Validering skjer her .","title":"grupperingsId"},{"location":"eventtyper/oppgave/felter/#tekst","text":"Dette er teksten som faktisk vises i eventet. Det er ikke noen st\u00f8tte for \u00e5 formatere teksten som settes i dette feltet. Feltet har en begrensning p\u00e5 500 tegn og kan ikke v\u00e6re null. Validering skjer her .","title":"tekst"},{"location":"eventtyper/oppgave/felter/#link","text":"Dette er lenken som blir aktivert i det en bruker trykker p\u00e5 selve eventet. En lenke m\u00e5 v\u00e6re en komplett URL, inkludert https protokoll. Feltet har en begrensning p\u00e5 200 tegn, og kan ikke v\u00e6re null eller inneholde en tom streng. Validering skjer her .","title":"link"},{"location":"eventtyper/oppgave/felter/#sikkerhetsnivaa","text":"Angir sikkerhetsniv\u00e5et for informasjonen som eventet innholder. DittNAV s\u00f8tter at en bruker er innlogget p\u00e5 niv\u00e5 3, hvis denne brukeren har eventer med niv\u00e5 4 s\u00e5 vil disse eventene bli \"gr\u00e5et ut\". Brukeren ser bare hvilken type event dette er, men ikke noe av innholdet. For \u00e5 se innholdet m\u00e5 brukeren steppe opp til et h\u00f8yere innloggingsniv\u00e5.","title":"sikkerhetsnivaa"},{"location":"eventtyper/oppgave/felter/#eksternvarsling","text":"!! NB !! Betaversjon !! Snakk med DittNav f\u00f8r du bruker dette feltet. Default verdien til dette feltet er false , men hvis det blir satt til true vil oppgave-eventet bli varslet p\u00e5 SMS/epost. Les mer om eksternvarsling her .","title":"eksternvarsling"},{"location":"eventtyper/oppgave/felter/#schemas","text":"Du finner Oppgave-schemas her .","title":"Schemas"},{"location":"eventtyper/oppgave/kodeeksempel/","text":"Kodeeksempel Java String topicnavn = \"aapen-brukernotifikasjon-nyOppgave-v1-testing\"; Nokkel nokkel = createNokkel(); Oppgave oppgave = createOppgave(); final ProducerRecord<Nokkel, Oppgave> record = new ProducerRecord<>(topicnavn, nokkel, oppgave); producer.send(record); Se et komplett eksempel her . Kotlin val topicnavn : String = \"aapen-brukernotifikasjon-nyOppgave-v1-testing\" val key : Nokkel = createKeyForEvent(systembruker) val event : Oppgave = createOppgaveForIdent(innloggetBruker, dto) val producerRecord = ProducerRecord(topicName, key, event) kafkaProducer.send(producerRecord) Se et komplett eksempel her .","title":"Kodeeksempel"},{"location":"eventtyper/oppgave/kodeeksempel/#kodeeksempel","text":"","title":"Kodeeksempel"},{"location":"eventtyper/oppgave/kodeeksempel/#java","text":"String topicnavn = \"aapen-brukernotifikasjon-nyOppgave-v1-testing\"; Nokkel nokkel = createNokkel(); Oppgave oppgave = createOppgave(); final ProducerRecord<Nokkel, Oppgave> record = new ProducerRecord<>(topicnavn, nokkel, oppgave); producer.send(record); Se et komplett eksempel her .","title":"Java"},{"location":"eventtyper/oppgave/kodeeksempel/#kotlin","text":"val topicnavn : String = \"aapen-brukernotifikasjon-nyOppgave-v1-testing\" val key : Nokkel = createKeyForEvent(systembruker) val event : Oppgave = createOppgaveForIdent(innloggetBruker, dto) val producerRecord = ProducerRecord(topicName, key, event) kafkaProducer.send(producerRecord) Se et komplett eksempel her .","title":"Kotlin"},{"location":"eventtyper/oppgave/topic/","text":"Kafka topics Milj\u00f8 Topic-navn dev aapen-brukernotifikasjon-nyOppgave-v1 prod aapen-brukernotifikasjon-nyOppgave-v1 Tilgang Tilgang til topic-ene kan bestilles ved \u00e5 opprette en pull-request mot dette repo-et .","title":"Kafka topics"},{"location":"eventtyper/oppgave/topic/#kafka-topics","text":"Milj\u00f8 Topic-navn dev aapen-brukernotifikasjon-nyOppgave-v1 prod aapen-brukernotifikasjon-nyOppgave-v1","title":"Kafka topics"},{"location":"eventtyper/oppgave/topic/#tilgang","text":"Tilgang til topic-ene kan bestilles ved \u00e5 opprette en pull-request mot dette repo-et .","title":"Tilgang"},{"location":"eventtyper/statusoppdatering/beskrivelse/","text":"Beskrivelse Hvis en sak eller s\u00f8knad i et fagsystem har endret status kan produsenten sende et Statusoppdatering-event . Dette kan for eksempel vises p\u00e5 en saksprosess-side. P\u00e5 bilde under ser du en kombinasjon av Beskjed , Oppgave og Statusoppdaterings -event.","title":"Beskrivelse"},{"location":"eventtyper/statusoppdatering/beskrivelse/#beskrivelse","text":"Hvis en sak eller s\u00f8knad i et fagsystem har endret status kan produsenten sende et Statusoppdatering-event . Dette kan for eksempel vises p\u00e5 en saksprosess-side. P\u00e5 bilde under ser du en kombinasjon av Beskjed , Oppgave og Statusoppdaterings -event.","title":"Beskrivelse"},{"location":"eventtyper/statusoppdatering/felter/","text":"Feltbeskrivelser Nokkel (Kafka key) Se Nokkel Statusoppdatering (Kafka value) Beskrivelse av feltene til eventet Statusoppdatering . Husk \u00e5 validere alle eventene med builderene v\u00e5re. Les mer om dette her . tidspunkt Et tidspunkt som noe skjedde, f.eks. da saksbehandlingen av en s\u00f8knad var ferdig. fodselsnummer F\u00f8dselsnummeret til brukeren som eventet tilh\u00f8rer. Feltet har en begrensning p\u00e5 11 tegn og kan ikke v\u00e6re null. Validering skjer her . grupperingsId Feltet grupperingsId brukes for \u00e5 kunne samle alle eventer som h\u00f8rer til en sak, s\u00f8knad eller et dokument. Dette er typisk en saksId, s\u00f8knadsId eller dokumentId, men dere velger selv hvilken verdi dere putter der. Men det er viktig at det er samme verdi for alle eventer som skal grupperes sammen. Typisk bruk for dette feltet vil v\u00e6re oppbygging av tidslinjer. Feltet har en begrensning p\u00e5 100 tegn og kan ikke v\u00e6re null. Validering skjer her . link Dette er lenken som blir aktivert i det en bruker trykker p\u00e5 selve eventet. En lenke m\u00e5 v\u00e6re en komplett URL, inkludert https protokoll. Feltet har en begrensning p\u00e5 200 tegn. Produsenten kan sende inn en tom String. Da vil ikke link v\u00e6re synlig for sluttbruker. Validering skjer her . sikkerhetsnivaa Angir sikkerhetsniv\u00e5et for informasjonen som eventet innholder. DittNAV st\u00f8tter at en bruker er innlogget p\u00e5 niv\u00e5 3, hvis denne brukeren har eventer med niv\u00e5 4 s\u00e5 vil disse eventene bli \"gr\u00e5et ut\". Brukeren ser bare hvilken type event dette er, men ikke noe av innholdet. For \u00e5 se innholdet m\u00e5 brukeren steppe opp til et h\u00f8yere innloggingsniv\u00e5. statusGlobal Produsenten m\u00e5 velge \u00e9n av v\u00e5re fire globale statuser: SENDT, MOTTATT, UNDER_BEHANDLING eller FERDIG. Validering skjer her . statusIntern StatusIntern kan v\u00e6re mer detaljert, f.eks Venter p\u00e5 dokumentasjon. Produsenten kan selv velge teksten i statusIntern. Feltet har en begrensning p\u00e5 100 tegn. Dette feltet er ikke obligatorisk og kan v\u00e6re null. Validering skjer her . sakstema Dette er sakstema til s\u00f8knaden/saken. For eksempel fra kodeverket. Feltet har en begrensning p\u00e5 50 tegn og kan ikke v\u00e6re null. Validering skjer her . Schemas Du finner Statusoppdatering-schemas her .","title":"Feltbeskrivelser"},{"location":"eventtyper/statusoppdatering/felter/#feltbeskrivelser","text":"","title":"Feltbeskrivelser"},{"location":"eventtyper/statusoppdatering/felter/#nokkel-kafka-key","text":"Se Nokkel","title":"Nokkel (Kafka key)"},{"location":"eventtyper/statusoppdatering/felter/#statusoppdatering-kafka-value","text":"Beskrivelse av feltene til eventet Statusoppdatering . Husk \u00e5 validere alle eventene med builderene v\u00e5re. Les mer om dette her .","title":"Statusoppdatering (Kafka value)"},{"location":"eventtyper/statusoppdatering/felter/#tidspunkt","text":"Et tidspunkt som noe skjedde, f.eks. da saksbehandlingen av en s\u00f8knad var ferdig.","title":"tidspunkt"},{"location":"eventtyper/statusoppdatering/felter/#fodselsnummer","text":"F\u00f8dselsnummeret til brukeren som eventet tilh\u00f8rer. Feltet har en begrensning p\u00e5 11 tegn og kan ikke v\u00e6re null. Validering skjer her .","title":"fodselsnummer"},{"location":"eventtyper/statusoppdatering/felter/#grupperingsid","text":"Feltet grupperingsId brukes for \u00e5 kunne samle alle eventer som h\u00f8rer til en sak, s\u00f8knad eller et dokument. Dette er typisk en saksId, s\u00f8knadsId eller dokumentId, men dere velger selv hvilken verdi dere putter der. Men det er viktig at det er samme verdi for alle eventer som skal grupperes sammen. Typisk bruk for dette feltet vil v\u00e6re oppbygging av tidslinjer. Feltet har en begrensning p\u00e5 100 tegn og kan ikke v\u00e6re null. Validering skjer her .","title":"grupperingsId"},{"location":"eventtyper/statusoppdatering/felter/#link","text":"Dette er lenken som blir aktivert i det en bruker trykker p\u00e5 selve eventet. En lenke m\u00e5 v\u00e6re en komplett URL, inkludert https protokoll. Feltet har en begrensning p\u00e5 200 tegn. Produsenten kan sende inn en tom String. Da vil ikke link v\u00e6re synlig for sluttbruker. Validering skjer her .","title":"link"},{"location":"eventtyper/statusoppdatering/felter/#sikkerhetsnivaa","text":"Angir sikkerhetsniv\u00e5et for informasjonen som eventet innholder. DittNAV st\u00f8tter at en bruker er innlogget p\u00e5 niv\u00e5 3, hvis denne brukeren har eventer med niv\u00e5 4 s\u00e5 vil disse eventene bli \"gr\u00e5et ut\". Brukeren ser bare hvilken type event dette er, men ikke noe av innholdet. For \u00e5 se innholdet m\u00e5 brukeren steppe opp til et h\u00f8yere innloggingsniv\u00e5.","title":"sikkerhetsnivaa"},{"location":"eventtyper/statusoppdatering/felter/#statusglobal","text":"Produsenten m\u00e5 velge \u00e9n av v\u00e5re fire globale statuser: SENDT, MOTTATT, UNDER_BEHANDLING eller FERDIG. Validering skjer her .","title":"statusGlobal"},{"location":"eventtyper/statusoppdatering/felter/#statusintern","text":"StatusIntern kan v\u00e6re mer detaljert, f.eks Venter p\u00e5 dokumentasjon. Produsenten kan selv velge teksten i statusIntern. Feltet har en begrensning p\u00e5 100 tegn. Dette feltet er ikke obligatorisk og kan v\u00e6re null. Validering skjer her .","title":"statusIntern"},{"location":"eventtyper/statusoppdatering/felter/#sakstema","text":"Dette er sakstema til s\u00f8knaden/saken. For eksempel fra kodeverket. Feltet har en begrensning p\u00e5 50 tegn og kan ikke v\u00e6re null. Validering skjer her .","title":"sakstema"},{"location":"eventtyper/statusoppdatering/felter/#schemas","text":"Du finner Statusoppdatering-schemas her .","title":"Schemas"},{"location":"eventtyper/statusoppdatering/kodeeksempel/","text":"Kodeeksempel Java String topicnavn = \"aapen-brukernotifikasjon-nyStatusoppdatering-v1-testing\"; Nokkel nokkel = createNokkel(); Statusoppdatering statusoppdatering = createStatusoppdatering(); final ProducerRecord<Nokkel, Statusoppdatering> record = new ProducerRecord<>(topicnavn, nokkel, statusoppdatering); producer.send(record); Samme prinsipp som Beskjed og Oppgave . Se et eksempel p\u00e5 Beskjed her . Kotlin val topicnavn : String = \"aapen-brukernotifikasjon-nyStatusoppdatering-v1-testing\" val key : Nokkel = createKeyForEvent(systembruker) val event : Statusoppdatering = createStatusoppdateringForIdent(innloggetBruker, dto) val producerRecord = ProducerRecord(topicName, key, event) kafkaProducer.send(producerRecord) Se et komplett eksempel her .","title":"Kodeeksempel"},{"location":"eventtyper/statusoppdatering/kodeeksempel/#kodeeksempel","text":"","title":"Kodeeksempel"},{"location":"eventtyper/statusoppdatering/kodeeksempel/#java","text":"String topicnavn = \"aapen-brukernotifikasjon-nyStatusoppdatering-v1-testing\"; Nokkel nokkel = createNokkel(); Statusoppdatering statusoppdatering = createStatusoppdatering(); final ProducerRecord<Nokkel, Statusoppdatering> record = new ProducerRecord<>(topicnavn, nokkel, statusoppdatering); producer.send(record); Samme prinsipp som Beskjed og Oppgave . Se et eksempel p\u00e5 Beskjed her .","title":"Java"},{"location":"eventtyper/statusoppdatering/kodeeksempel/#kotlin","text":"val topicnavn : String = \"aapen-brukernotifikasjon-nyStatusoppdatering-v1-testing\" val key : Nokkel = createKeyForEvent(systembruker) val event : Statusoppdatering = createStatusoppdateringForIdent(innloggetBruker, dto) val producerRecord = ProducerRecord(topicName, key, event) kafkaProducer.send(producerRecord) Se et komplett eksempel her .","title":"Kotlin"},{"location":"eventtyper/statusoppdatering/topic/","text":"Kafka topics Milj\u00f8 Topic-navn dev aapen-brukernotifikasjon-nyStatusoppdatering-v1 prod aapen-brukernotifikasjon-nyStatusoppdatering-v1 Tilgang Tilgang til topic-ene kan bestilles ved \u00e5 opprette en pull-request mot dette repo-et .","title":"Kafka topics"},{"location":"eventtyper/statusoppdatering/topic/#kafka-topics","text":"Milj\u00f8 Topic-navn dev aapen-brukernotifikasjon-nyStatusoppdatering-v1 prod aapen-brukernotifikasjon-nyStatusoppdatering-v1","title":"Kafka topics"},{"location":"eventtyper/statusoppdatering/topic/#tilgang","text":"Tilgang til topic-ene kan bestilles ved \u00e5 opprette en pull-request mot dette repo-et .","title":"Tilgang"}]}